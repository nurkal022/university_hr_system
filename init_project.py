#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
"""

from app import app
from models import db, User, Department, Vacancy, Test, Application, TestResult, CommissionVote
from datetime import datetime, timedelta
import json
import random

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
AUES_DEPARTMENTS = [
    "–ö–∞—Ñ–µ–¥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ê–£)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ IT-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ (IT–ï)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ö–ë)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –∏ —Ñ–∏–∑–∏–∫–∏ (–¢–≠ –∏ –§)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ (–≠–≠)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —ç–Ω–µ—Ä–≥–æ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–≤–æ–¥–∞ –∏ —ç–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∏ (–≠–û–≠–ü –∏ –≠–¢)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —ç–Ω–µ—Ä–≥–∏–∏ (–≠–í–ò–≠)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —ç–∫–æ–ª–æ–≥–∏–∏ –∏ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–≠–ú–ò)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —Ç–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–¢–ö–ò)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–ö–ò)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–≠–ò)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —è–∑—ã–∫–æ–≤",
    "–ö–∞—Ñ–µ–¥—Ä–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω (–°–î)",
    "–ö–∞—Ñ–µ–¥—Ä–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏"
]

AUES_HR_USERS = [
    {
        'email': 'hr@aues.kz',
        'first_name': '–ê–ª–∏—è',
        'last_name': '–ù—É—Ä–ª–∞–Ω–æ–≤–∞',
        'middle_name': '–°–µ—Ä–∏–∫–±–∞–µ–≤–Ω–∞'
    },
    {
        'email': 'hr.recruitment@aues.kz',
        'first_name': '–î–∞–Ω–∞',
        'last_name': '–ñ–∞–Ω–∏–±–µ–∫–æ–≤–∞',
        'middle_name': '–ú—É—Ö—Ç–∞—Ä–æ–≤–Ω–∞'
    },
    {
        'email': 'hr.management@aues.kz',
        'first_name': '–ì—É–ª—å–Ω–∞—Ä–∞',
        'last_name': '–ê—Ö–º–µ—Ç–æ–≤–∞',
        'middle_name': '–ë–∞–∫—ã—Ç–∂–∞–Ω–æ–≤–Ω–∞'
    }
]

AUES_DEPARTMENT_HEADS = [
    {
        'email': 'abzhanova@aues.kz',
        'first_name': '–õ–∞—É–ª–∞—Å—ã–Ω',
        'last_name': '–ê–±–∂–∞–Ω–æ–≤–∞',
        'middle_name': '–ö–æ—Å—ã–ª–≥–∞–Ω–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ê–£)'
    },
    {
        'email': 'utegenova@aues.kz',
        'first_name': '–ê–Ω–∞—Ä',
        'last_name': '–£—Ç–µ–≥–µ–Ω–æ–≤–∞',
        'middle_name': '–£—Ä–∞–Ω—Ç–∞–µ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ IT-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ (IT–ï)'
    },
    {
        'email': 'begimbaeva@aues.kz',
        'first_name': '–ï–Ω–ª–∏–∫',
        'last_name': '–ë–µ–≥–∏–º–±–∞–µ–≤–∞',
        'middle_name': '–ï—Ä–∏–∫–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ö–ë)'
    },
    {
        'email': 'korobkov@aues.kz',
        'first_name': '–ú–∞–∫—Å–∏–º',
        'last_name': '–ö–æ—Ä–æ–±–∫–æ–≤',
        'middle_name': '–°–µ—Ä–≥–µ–µ–≤–∏—á',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –∏ —Ñ–∏–∑–∏–∫–∏ (–¢–≠ –∏ –§)'
    },
    {
        'email': 'uteshkalieva@aues.kz',
        'first_name': '–õ—è–∑–∑–∞—Ç',
        'last_name': '–£—Ç–µ—à–∫–∞–ª–∏–µ–≤–∞',
        'middle_name': '–®—ã–Ω–±—É–ª–∞—Ç–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ (–≠–≠)'
    },
    {
        'email': 'shynybay@aues.kz',
        'first_name': '–ñ–∞–Ω–¥–æ—Å',
        'last_name': '–®—ã–Ω—ã–±–∞–π',
        'middle_name': '–°–∞–ø–∞—Ä“ì–∞–ª–∏“±–ª—ã',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–Ω–µ—Ä–≥–æ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–≤–æ–¥–∞ –∏ —ç–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∏ (–≠–û–≠–ü –∏ –≠–¢)'
    },
    {
        'email': 'tergemes@aues.kz',
        'first_name': '“ö–∞–∂—ã–±–µ–∫',
        'last_name': '–¢–µ—Ä–≥–µ–º–µ—Å',
        'middle_name': '–¢—ñ–ª–µ—É“ì–∞–ª–∏“±–ª—ã',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —ç–Ω–µ—Ä–≥–∏–∏ (–≠–í–ò–≠)'
    },
    {
        'email': 'abikenova@aues.kz',
        'first_name': '–ê—Å–µ–ª—å',
        'last_name': '–ê–±–∏–∫–µ–Ω–æ–≤–∞',
        'middle_name': '–ê–º–∞–Ω–≥–µ–ª—å–¥–∏–µ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–∫–æ–ª–æ–≥–∏–∏ –∏ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–≠–ú–ò)'
    },
    {
        'email': 'kadylbekkyzy@aues.kz',
        'first_name': '–≠–ª—å–≤–∏—Ä–∞',
        'last_name': '“ö–∞–¥—ã–ª–±–µ–∫“õ—ã–∑—ã',
        'middle_name': '',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —Ç–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–¢–ö–ò)'
    },
    {
        'email': 'tolendyuly@aues.kz',
        'first_name': '–°–∞–Ω–∞—Ç',
        'last_name': '–¢”©–ª–µ–Ω–¥—ñ“±–ª—ã',
        'middle_name': '',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–ö–ò)'
    },
    {
        'email': 'orazalieva@aues.kz',
        'first_name': '–°–∞–Ω–¥—É–≥–∞—à',
        'last_name': '–û—Ä–∞–∑–∞–ª–∏–µ–≤–∞',
        'middle_name': '–ö—É–¥–∞–π–±–µ—Ä–≥–µ–Ω–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ (–≠–ò)'
    },
    {
        'email': 'tuleup@aues.kz',
        'first_name': '–ú–µ–π—Ä–∏–º–∫—É–ª',
        'last_name': '–¢—É–ª–µ—É–ø',
        'middle_name': '–ú—É—Ö–∞–º–µ–¥–∏—è—Ä–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —è–∑—ã–∫–æ–≤'
    },
    {
        'email': 'kabdushev@aues.kz',
        'first_name': '–ë—É–ª–∞—Ç',
        'last_name': '–ö–∞–±–¥—É—à–µ–≤',
        'middle_name': '–ñ–æ–ª–∞–º–∞–Ω–æ–≤–∏—á',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω (–°–î)'
    },
    {
        'email': 'baysalova@aues.kz',
        'first_name': '–ú–∞–Ω—à—É–∫',
        'last_name': '–ë–∞–π—Å–∞–ª–æ–≤–∞',
        'middle_name': '–ñ—É–º–∞–º—É—Ä–∞—Ç–æ–≤–Ω–∞',
        'dept_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏'
    }
]

CANDIDATES_DATA = [
    {
        'email': 'candidate1@example.com',
        'first_name': '–ê–ª–µ–∫—Å–µ–π',
        'last_name': '–ú–æ—Ä–æ–∑–æ–≤',
        'middle_name': '–î–º–∏—Ç—Ä–∏–µ–≤–∏—á'
    },
    {
        'email': 'candidate2@example.com',
        'first_name': '–ú–∞—Ä–∏—è',
        'last_name': '–í–æ–ª–∫–æ–≤–∞',
        'middle_name': '–ê–Ω–¥—Ä–µ–µ–≤–Ω–∞'
    },
    {
        'email': 'candidate3@example.com',
        'first_name': '–î–º–∏—Ç—Ä–∏–π',
        'last_name': '–ö–æ–∑–ª–æ–≤',
        'middle_name': '–°–µ—Ä–≥–µ–µ–≤–∏—á'
    }
]

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
PROGRAMMING_TEST_QUESTIONS = [
    {
        'question': '–ö–∞–∫–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞?',
        'options': ['HTML', 'CSS', 'JavaScript', 'Python'],
        'correct': 3
    },
    {
        'question': '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ API?',
        'options': ['Application Programming Interface', 'Automated Program Integration', 'Advanced Programming Implementation', 'Application Process Integration'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫–∞—è –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø LIFO?',
        'options': ['–û—á–µ—Ä–µ–¥—å', '–°—Ç–µ–∫', '–ú–∞—Å—Å–∏–≤', '–°–ø–∏—Å–æ–∫'],
        'correct': 1
    },
    {
        'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ SQL?',
        'options': ['–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö', '–Ø–∑—ã–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤', '–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫'],
        'correct': 2
    },
    {
        'question': '–ö–∞–∫–æ–π HTTP –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤?',
        'options': ['GET', 'POST', 'PUT', 'DELETE'],
        'correct': 1
    },
    {
        'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø—É–∑—ã—Ä—å–∫–æ–º?',
        'options': ['–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –º–µ–Ω—è–µ—Ç –∏—Ö –º–µ—Å—Ç–∞–º–∏', '–î–µ–ª–∏—Ç –º–∞—Å—Å–∏–≤ –ø–æ–ø–æ–ª–∞–º', '–ò—â–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç', '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∫—É—Ä—Å–∏—é'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —É –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞?',
        'options': ['O(n)', 'O(log n)', 'O(n¬≤)', 'O(1)'],
        'correct': 1
    },
    {
        'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ –û–û–ü?',
        'options': ['–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º', '–û—Å–Ω–æ–≤—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤', '–û—Ç–∫—Ä—ã—Ç–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫–æ–π –ø—Ä–∏–Ω—Ü–∏–ø –û–û–ü –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏?',
        'options': ['–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ', '–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º', '–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è', '–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è'],
        'correct': 2
    },
    {
        'question': '–ß—Ç–æ —Ç–∞–∫–æ–µ Git?',
        'options': ['–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä', '–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π', '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö', '–í–µ–±-—Å–µ—Ä–≤–µ—Ä'],
        'correct': 1
    }
]

IQ_TEST_QUESTIONS = [
    {
        'question': '–ö–∞–∫–æ–µ —á–∏—Å–ª–æ —Å–ª–µ–¥—É—é—â–µ–µ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: 2, 4, 8, 16, ?',
        'options': ['24', '32', '30', '28'],
        'correct': 1
    },
    {
        'question': '–ï—Å–ª–∏ A = 1, B = 2, C = 3, —Ç–æ CAB = ?',
        'options': ['312', '321', '123', '132'],
        'correct': 0
    },
    {
        'question': '–ù–∞–π–¥–∏—Ç–µ –ª–∏—à–Ω–µ–µ: –°–æ–±–∞–∫–∞, –ö–æ—à–∫–∞, –õ–æ—à–∞–¥—å, –°—Ç–æ–ª',
        'options': ['–°–æ–±–∞–∫–∞', '–ö–æ—à–∫–∞', '–õ–æ—à–∞–¥—å', '–°—Ç–æ–ª'],
        'correct': 3
    },
    {
        'question': '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º: –ö—Ä–∞—Å–Ω—ã–π, –°–∏–Ω–∏–π, –í—ã—Å–æ–∫–∏–π, –ó–µ–ª–µ–Ω—ã–π',
        'options': ['–ö—Ä–∞—Å–Ω—ã–π', '–°–∏–Ω–∏–π', '–í—ã—Å–æ–∫–∏–π', '–ó–µ–ª–µ–Ω—ã–π'],
        'correct': 2
    },
    {
        'question': '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 1, 1, 2, 3, 5, 8, ?',
        'options': ['11', '13', '15', '10'],
        'correct': 1
    },
    {
        'question': '–°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤ 2.5 —á–∞—Å–∞—Ö?',
        'options': ['120', '150', '180', '90'],
        'correct': 1
    },
    {
        'question': '–ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, –∫–∞–∫–æ–π –¥–µ–Ω—å –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ 15 –¥–Ω–µ–π?',
        'options': ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥'],
        'correct': 1
    },
    {
        'question': '–ö–∞–∫–æ–µ —á–∏—Å–ª–æ –ø–æ–ª—É—á–∏—Ç—Å—è: 25% –æ—Ç 80?',
        'options': ['15', '20', '25', '30'],
        'correct': 1
    },
    {
        'question': '–ê–Ω—Ç–æ–Ω–∏–º —Å–ª–æ–≤–∞ "–≤—ã—Å–æ–∫–∏–π":',
        'options': ['–ë–æ–ª—å—à–æ–π', '–ù–∏–∑–∫–∏–π', '–®–∏—Ä–æ–∫–∏–π', '–î–ª–∏–Ω–Ω—ã–π'],
        'correct': 1
    },
    {
        'question': '–†–µ—à–∏—Ç–µ: 7 √ó 8 - 6 √ó 9 = ?',
        'options': ['2', '1', '3', '0'],
        'correct': 0
    }
]

EQ_TEST_QUESTIONS = [
    {
        'question': '–ö–∞–∫ –≤—ã –æ–±—ã—á–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç–µ –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É?',
        'options': ['–ü—Ä–∏–Ω–∏–º–∞—é –∫ —Å–≤–µ–¥–µ–Ω–∏—é –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é', '–°—Ä–∞–∑—É –∑–∞—â–∏—â–∞—é—Å—å', '–ò–≥–Ω–æ—Ä–∏—Ä—É—é', '–†–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å'],
        'correct': 0
    },
    {
        'question': '–ß—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ, –∫–æ–≥–¥–∞ –≤–∏–¥–∏—Ç–µ —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–ª–µ–≥—É?',
        'options': ['–ü–æ–¥—Ö–æ–∂—É –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø–æ–º–æ—â—å', '–î–µ–ª–∞—é –≤–∏–¥, —á—Ç–æ –Ω–µ –∑–∞–º–µ—á–∞—é', '–ñ–¥—É, –ø–æ–∫–∞ –æ–±—Ä–∞—Ç–∏—Ç—Å—è —Å–∞–º', '–°–æ–æ–±—â–∞—é —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫ –≤—ã —Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º?',
        'options': ['–ü–ª–∞–Ω–∏—Ä—É—é –∏ –æ—Ä–≥–∞–Ω–∏–∑—É—é', '–ò—â—É –ø–æ–¥–¥–µ—Ä–∂–∫—É —É –¥—Ä—É–≥–∏—Ö', '–ò–∑–±–µ–≥–∞—é —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π', '–ü–µ—Ä–µ–Ω–æ—à—É –Ω–∞ –¥—Ä—É–≥–∏—Ö'],
        'correct': 0
    },
    {
        'question': '–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã:',
        'options': ['–ò—â–µ—Ç–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å', '–û—Ç—Å—Ç–∞–∏–≤–∞–µ—Ç–µ —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é', '–£—Ö–æ–¥–∏—Ç–µ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞', '–ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç–µ —Ç—Ä–µ—Ç—å—é —Å—Ç–æ—Ä–æ–Ω—É'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫ –≤—ã –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç–µ —Å–µ–±—è –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π?',
        'options': ['–°—Ç–∞–≤–ª—é —á–µ—Ç–∫–∏–µ –ø–ª–∞–Ω—ã', '–ò—â—É –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ', '–ñ–¥—É –≤–Ω–µ—à–Ω–µ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏', '–†–∞–±–æ—Ç–∞—é –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º'],
        'correct': 0
    },
    {
        'question': '–í–∞—à–∞ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –Ω–µ—É–¥–∞—á—É:',
        'options': ['–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –æ—à–∏–±–∫–∏ –∏ —É—á—É—Å—å', '–†–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –Ω–∞–¥–æ–ª–≥–æ', '–û–±–≤–∏–Ω—è—é –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞', '–°—Ä–∞–∑—É —Å–¥–∞—é—Å—å'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫ –≤—ã –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —ç–º–æ—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π?',
        'options': ['–õ–µ–≥–∫–æ –ø–æ–Ω–∏–º–∞—é –∏ —Å–æ—á—É–≤—Å—Ç–≤—É—é', '–ó–∞–º–µ—á–∞—é, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω–∏–º–∞—é', '–†–µ–¥–∫–æ –æ–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞–Ω–∏–µ', '–°—á–∏—Ç–∞—é –Ω–µ–≤–∞–∂–Ω—ã–º–∏'],
        'correct': 0
    },
    {
        'question': '–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã:',
        'options': ['–ê–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ', '–†–∞–±–æ—Ç–∞–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ', '–í—ã–ø–æ–ª–Ω—è–µ—Ç–µ –º–∏–Ω–∏–º—É–º', '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º'],
        'correct': 0
    },
    {
        'question': '–í–∞—à –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º:',
        'options': ['–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã', '–î–µ–π—Å—Ç–≤—É—é –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ', '–ñ–¥—É, –ø–æ–∫–∞ —Ä–µ—à–∏—Ç—Å—è —Å–∞–º–æ', '–ü–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞—é –Ω–∞ –¥—Ä—É–≥–∏—Ö'],
        'correct': 0
    },
    {
        'question': '–ö–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º?',
        'options': ['–ü—Ä–∏–Ω–∏–º–∞—é –∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Å—å', '–ù–∞—Å—Ç–æ—Ä–æ–∂–µ–Ω–Ω–æ, –Ω–æ –ø—Ä–∏—Å–ø–æ—Å–∞–±–ª–∏–≤–∞—é—Å—å', '–°–æ–ø—Ä–æ—Ç–∏–≤–ª—è—é—Å—å', '–ò–∑–±–µ–≥–∞—é'],
        'correct': 0
    }
]

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∫–æ–º–∏—Å—Å–∏–∏
COMMISSION_EMAILS = [
    'commission1@university.com',
    'commission2@university.com', 
    'commission3@university.com',
    'commission4@university.com',
    'commission5@university.com'
]

def get_test_questions(test_type):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–æ —Ç–∏–ø—É"""
    questions_map = {
        'iq': IQ_TEST_QUESTIONS,
        'eq': EQ_TEST_QUESTIONS,
        'custom': PROGRAMMING_TEST_QUESTIONS
    }
    return questions_map.get(test_type, [])

def create_user_if_not_exists(email, first_name, last_name, middle_name, role, password, department_id=None):
    """–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"""
    existing_user = User.query.filter_by(email=email).first()
    if existing_user:
        return existing_user
    
    user = User(
        email=email,
        first_name=first_name,
        last_name=last_name,
        middle_name=middle_name,
        role=role,
        department_id=department_id
    )
    user.set_password(password)
    db.session.add(user)
    return user

def create_test_if_not_exists(name, test_type, created_by_id, questions=None):
    """–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"""
    existing_test = Test.query.filter_by(name=name).first()
    if existing_test:
        return existing_test
    
    if questions is None:
        questions = get_test_questions(test_type)
    
    test = Test(
        name=name,
        type=test_type,
        questions=json.dumps(questions, ensure_ascii=False),
        created_by=created_by_id,
        is_active=True
    )
    db.session.add(test)
    return test

def create_simple_test_data():
    """–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞"""
    print("üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")
    
    with app.app_context():
        # –°–æ–∑–¥–∞–Ω–∏–µ HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        hr_user = User.query.filter_by(email='hr@example.com').first()
        if not hr_user:
            hr_user = User(
                email='hr@example.com',
                first_name='–ê–Ω–Ω–∞',
                last_name='–ü–µ—Ç—Ä–æ–≤–∞',
                role='hr'
            )
            hr_user.set_password('password123')
            db.session.add(hr_user)
            
        # –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
        dept = Department.query.filter_by(name='–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π').first()
        if not dept:
            dept = Department(name='–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π')
            db.session.add(dept)
            
        db.session.commit()
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º helper —Ñ—É–Ω–∫—Ü–∏–∏
        tests_to_create = [
            ('–¢–µ—Å—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é', 'custom'),
            ('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π IQ —Ç–µ—Å—Ç', 'iq'),
            ('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π EQ —Ç–µ—Å—Ç', 'eq')
        ]
        
        created_tests = []
        for name, test_type in tests_to_create:
            test = create_test_if_not_exists(name, test_type, hr_user.id)
            created_tests.append(test)
        
        db.session.commit()
        
        print(f'‚úÖ –°–æ–∑–¥–∞–Ω HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {hr_user.email}')
        print(f'‚úÖ –°–æ–∑–¥–∞–Ω –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç: {dept.name}')
        print(f'‚úÖ –°–æ–∑–¥–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤: {len(created_tests)}')
        print()
        print('–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:')
        print('Email: hr@example.com')
        print('–ü–∞—Ä–æ–ª—å: password123')

def get_magic_links():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö magic links –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    print("üîó Magic Links –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏")
    print("=" * 60)
    
    with app.app_context():
        votes = CommissionVote.query.all()
        
        if not votes:
            print("‚ö†Ô∏è  –ù–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.")
            print("–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.")
            return
        
        print(f"–ù–∞–π–¥–µ–Ω–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π: {len(votes)}")
        print()
        
        # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –∑–∞—è–≤–∫–∞–º
        by_application = {}
        for vote in votes:
            app_id = vote.application_id
            if app_id not in by_application:
                by_application[app_id] = []
            by_application[app_id].append(vote)
        
        for app_id, app_votes in by_application.items():
            application = Application.query.get(app_id)
            print(f"üìã –ó–∞—è–≤–∫–∞ #{app_id}: {application.candidate.full_name}")
            print(f"   –í–∞–∫–∞–Ω—Å–∏—è: {application.vacancy.title}")
            print(f"   –°—Ç–∞—Ç—É—Å: {application.status}")
            print(f"   –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π: {len(app_votes)}")
            print()
            
            for i, vote in enumerate(app_votes, 1):
                print(f"   üë§ –ß–ª–µ–Ω –∫–æ–º–∏—Å—Å–∏–∏ #{i}")
                print(f"      Email: {vote.voter_email}")
                print(f"      Link: http://127.0.0.1:5000/vote/{vote.magic_token}")
                print(f"      –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞: {'–î–∞' if vote.token_used else '–ù–µ—Ç'}")
                if vote.vote:
                    print(f"      –ì–æ–ª–æ—Å: {vote.vote}")
                print()
            
            print("-" * 60)
        
        print("\nüí° –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:")
        print("1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª—é–±—É—é —Å—Å—ã–ª–∫—É")
        print("2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ")
        print("3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è")
        print("4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ HR –ø–∞–Ω–µ–ª–∏")

def create_default_admin():
    """–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"""
    admin = User.query.filter_by(role='admin').first()
    if not admin:
        admin = create_user_if_not_exists(
            'admin@university.com',
            '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
            '–°–∏—Å—Ç–µ–º—ã',
            '',
            'admin',
            'admin123'
        )
        db.session.commit()
        print("‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω (admin@university.com / admin123)")
        return admin
    else:
        print("‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
        return admin

def create_test_departments():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –ê–£–≠–°"""
    if not Department.query.first():
        departments = [Department(name=dept_name) for dept_name in AUES_DEPARTMENTS]
        db.session.add_all(departments)
        db.session.commit()
        print("‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã –ê–£–≠–° —Å–æ–∑–¥–∞–Ω—ã")
        return departments
    else:
        print("‚úÖ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
        return Department.query.all()

def create_test_hr_users():
    """–°–æ–∑–¥–∞–Ω–∏–µ HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ê–£–≠–°"""
    created_count = 0
    
    for hr_info in AUES_HR_USERS:
        existing_user = User.query.filter_by(email=hr_info['email']).first()
        if not existing_user:
            create_user_if_not_exists(
                hr_info['email'], 
                hr_info['first_name'], 
                hr_info['last_name'], 
                hr_info['middle_name'], 
                'hr', 
                'aues2024'
            )
            created_count += 1
    
    if created_count > 0:
        db.session.commit()
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω—ã {created_count} HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ê–£–≠–°")
    else:
        print("‚úÖ HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return User.query.filter_by(role='hr').all()

def create_test_department_heads():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –≥–ª–∞–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –ê–£–≠–°"""
    departments = Department.query.all()
    
    if not departments:
        print("‚ö†Ô∏è  –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã")
        return []
    
    created_heads = []
    for head_data in AUES_DEPARTMENT_HEADS:
        if not User.query.filter_by(email=head_data['email']).first():
            # –ù–∞—Ö–æ–¥–∏–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
            dept = Department.query.filter_by(name=head_data['dept_name']).first()
            if not dept:
                print(f"‚ö†Ô∏è  –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç '{head_data['dept_name']}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
                continue
            
            dept_head = User(
                email=head_data['email'],
                first_name=head_data['first_name'],
                last_name=head_data['last_name'],
                middle_name=head_data['middle_name'],
                role='department_head',
                department_id=dept.id
            )
            dept_head.set_password('aues2024')
            created_heads.append(dept_head)
            
            db.session.add(dept_head)
            db.session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
            # –ù–∞–∑–Ω–∞—á–∞–µ–º –≥–ª–∞–≤–æ–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
            dept.head_id = dept_head.id
    
    if created_heads:
        db.session.commit()
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω—ã {len(created_heads)} —Ä–µ–∞–ª—å–Ω—ã—Ö –≥–ª–∞–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –ê–£–≠–°")
    else:
        print("‚úÖ –ì–ª–∞–≤—ã –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return User.query.filter_by(role='department_head').all()

def create_test_candidates():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤"""
    created_count = 0
    
    for candidate_data in CANDIDATES_DATA:
        existing_user = User.query.filter_by(email=candidate_data['email']).first()
        if not existing_user:
            create_user_if_not_exists(
                candidate_data['email'],
                candidate_data['first_name'],
                candidate_data['last_name'],
                candidate_data['middle_name'],
                'candidate',
                'candidate123'
            )
            created_count += 1
    
    if created_count > 0:
        db.session.commit()
        print("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω—ã")
    else:
        print("‚úÖ –ö–∞–Ω–¥–∏–¥–∞—Ç—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return User.query.filter_by(role='candidate').all()

def create_test_vacancies():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è –ê–£–≠–°"""
    hr_users = User.query.filter_by(role='hr').all()
    departments = Department.query.all()
    
    if not hr_users:
        print("‚ö†Ô∏è  –ù–µ—Ç HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–π")
        return []
    
    if not departments:
        print("‚ö†Ô∏è  –ù–µ—Ç –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–π")
        return []
    
    # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    dept_dict = {dept.name: dept.id for dept in departments}
    
    vacancies_data = [
        {
            'title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ê–£)',
            'discipline': '–¢–µ–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
            'employment_type': 'full',
            'work_format': 'hybrid',
            'education_level': 'master',
            'required_specialty': '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏',
            'min_experience': 3,
            'description': '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ª–µ–∫—Ü–∏–π –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏–π\n- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç\n- –ù–∞—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –æ–±–ª–∞—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏\n- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–∏–ø–ª–æ–º–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –í—ã—Å—à–µ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ\n- –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏\n- –ó–Ω–∞–Ω–∏–µ MATLAB, Simulink\n- –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∂—É—Ä–Ω–∞–ª–∞—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è',
            'salary': '200,000 - 280,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq', 'custom']
        },
        {
            'title': '–î–æ—Ü–µ–Ω—Ç –∫–∞—Ñ–µ–¥—Ä—ã IT-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ IT-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ (IT–ï)',
            'discipline': '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
            'employment_type': 'full',
            'work_format': 'hybrid',
            'education_level': 'phd',
            'required_specialty': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è',
            'min_experience': 5,
            'description': '–ò—â–µ–º –¥–æ—Ü–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –í–µ–¥–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –ø–æ –ò–ò –∏ ML\n- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º\n- –ù–∞—É—á–Ω–æ-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- PhD –≤ –æ–±–ª–∞—Å—Ç–∏ IT –∏–ª–∏ —Å–º–µ–∂–Ω—ã—Ö –Ω–∞—É–∫\n- –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å Python, TensorFlow, PyTorch\n- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏\n- –ó–Ω–∞–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞',
            'salary': '250,000 - 350,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq', 'eq']
        },
        {
            'title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ö–ë)',
            'discipline': '–ó–∞—â–∏—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º',
            'employment_type': 'full',
            'work_format': 'office',
            'education_level': 'master',
            'required_specialty': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
            'min_experience': 2,
            'description': '–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –ø–æ –∑–∞—â–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏\n- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è—Ö\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è–º\n- –£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø–æ –ò–ë\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞—Å—Ç–∏ –ò–ë\n- –ó–Ω–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π\n- –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∑–∞—â–∏—Ç—ã\n- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ CISSP, CEH –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è',
            'salary': '220,000 - 300,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq', 'custom']
        },
        {
            'title': '–ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –∏ —Ñ–∏–∑–∏–∫–∏ (–¢–≠ –∏ –§)',
            'discipline': '–¢–µ–ø–ª–æ—Ç–µ—Ö–Ω–∏–∫–∞ –∏ —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞',
            'employment_type': 'full',
            'work_format': 'office',
            'education_level': 'phd',
            'required_specialty': '–¢–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –¢–µ–ø–ª–æ—Ç–µ—Ö–Ω–∏–∫–∞',
            'min_experience': 10,
            'description': '–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–µ–¥—É—â–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–∞ –∫–∞—Ñ–µ–¥—Ä—ã —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –í–µ–¥–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω\n- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–∞—É—á–Ω—ã–º–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º–∏\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—Ç–æ—Ä–∞–Ω—Ç–æ–≤\n- –£—á–∞—Å—Ç–∏–µ –≤ –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –î–æ–∫—Ç–æ—Ä—Å–∫–∞—è —Å—Ç–µ–ø–µ–Ω—å –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç–µ–ø–ª–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏\n- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –æ–ø—ã—Ç\n- –í—ã—Å–æ–∫–∏–π –∏–Ω–¥–µ–∫—Å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫—Ä—É–ø–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏',
            'salary': '400,000 - 600,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq', 'eq', 'custom']
        },
        {
            'title': '–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∫–∞—Ñ–µ–¥—Ä—ã —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ (–≠–≠)',
            'discipline': '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –∏ –ø–æ–¥—Å—Ç–∞–Ω—Ü–∏–∏',
            'employment_type': 'part',
            'work_format': 'hybrid',
            'education_level': 'bachelor',
            'required_specialty': '–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞',
            'min_experience': 0,
            'description': '–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –º–æ–ª–æ–¥–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –Ω–∞ –∫–∞—Ñ–µ–¥—Ä–µ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏–π\n- –ü–æ–º–æ—â—å –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n- –£—á–∞—Å—Ç–∏–µ –≤ –Ω–∞—É—á–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∫–∞—Ñ–µ–¥—Ä—ã\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –í—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–µ\n- –ó–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∏\n- –ñ–µ–ª–∞–Ω–∏–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –Ω–∞—É–∫–µ\n- –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏',
            'salary': '140,000 - 200,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq']
        },
        {
            'title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏',
            'discipline': '–í—ã—Å—à–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
            'employment_type': 'full',
            'work_format': 'office',
            'education_level': 'master',
            'required_specialty': '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
            'min_experience': 2,
            'description': '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –í–µ–¥–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤—ã—Å—à–µ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏\n- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏–π\n- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ\n- –û–ø—ã—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –≤—É–∑–µ\n- –ó–Ω–∞–Ω–∏–µ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏\n- –¢–µ—Ä–ø–µ–Ω–∏–µ –∏ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏',
            'salary': '180,000 - 250,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['iq', 'eq']
        },
        {
            'title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞',
            'department_name': '–ö–∞—Ñ–µ–¥—Ä–∞ —è–∑—ã–∫–æ–≤',
            'discipline': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π',
            'employment_type': 'full',
            'work_format': 'hybrid',
            'education_level': 'master',
            'required_specialty': '–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞, –§–∏–ª–æ–ª–æ–≥–∏—è',
            'min_experience': 2,
            'description': '–ò—â–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π.\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:\n- –ü—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ\n- –†–∞–∑–≤–∏—Ç–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤\n- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —ç–∫–∑–∞–º–µ–Ω–∞–º\n- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:\n- –í—ã—Å—à–µ–µ —Ñ–∏–ª–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ\n- –£—Ä–æ–≤–µ–Ω—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ C1/C2\n- –û–ø—ã—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è ESP\n- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è',
            'salary': '170,000 - 230,000 —Ç–µ–Ω–≥–µ',
            'required_test_types': ['eq']
        }
    ]
    
    created_vacancies = []
    for i, vacancy_data in enumerate(vacancies_data):
        hr_user = hr_users[i % len(hr_users)]  # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ–∂–¥—É HR
        
        # –ù–∞—Ö–æ–¥–∏–º ID –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
        dept_id = dept_dict.get(vacancy_data['department_name'])
        if not dept_id:
            print(f"‚ö†Ô∏è  –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç '{vacancy_data['department_name']}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
            continue
        
        if not Vacancy.query.filter_by(title=vacancy_data['title']).first():
            vacancy = Vacancy(
                title=vacancy_data['title'],
                department_id=dept_id,
                discipline=vacancy_data['discipline'],
                employment_type=vacancy_data['employment_type'],
                work_format=vacancy_data['work_format'],
                education_level=vacancy_data['education_level'],
                required_specialty=vacancy_data['required_specialty'],
                min_experience=vacancy_data['min_experience'],
                application_start=datetime.utcnow(),
                application_end=datetime.utcnow() + timedelta(days=30),
                work_start_date=datetime.utcnow() + timedelta(days=60),
                created_by=hr_user.id,
                contact_person=hr_user.full_name,
                contact_email=hr_user.email,
                description=vacancy_data['description'],
                salary=vacancy_data['salary']
            )
            
            db.session.add(vacancy)
            db.session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID –≤–∞–∫–∞–Ω—Å–∏–∏
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã –ø–æ —Ç–∏–ø–∞–º
            for test_type in vacancy_data['required_test_types']:
                # –ò—â–µ–º —Ç–µ—Å—Ç—ã –ø–æ —Ç–∏–ø—É
                tests = Test.query.filter_by(type=test_type, is_active=True).all()
                for test in tests:
                    if test not in vacancy.required_tests:
                        vacancy.required_tests.append(test)
            
            created_vacancies.append(vacancy)
    
    if created_vacancies:
        db.session.commit()
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω—ã {len(created_vacancies)} —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π –ê–£–≠–°")
    else:
        print("‚úÖ –í–∞–∫–∞–Ω—Å–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return Vacancy.query.all()

def create_test_tests():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ IQ/EQ"""
    hr_users = User.query.filter_by(role='hr').all()
    if not hr_users:
        print("‚ö†Ô∏è  –ù–µ—Ç HR –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤")
        return []
    
    tests_data = [
        ('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π IQ —Ç–µ—Å—Ç –¥–ª—è –ü–ü–°', 'iq'),
        ('–¢–µ—Å—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π', 'eq'),
        ('–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π IQ —Ç–µ—Å—Ç –¥–ª—è IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤', 'iq'),
        ('EQ —Ç–µ—Å—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ', 'eq'),
        ('–¢–µ—Å—Ç –ø–æ –æ—Å–Ω–æ–≤–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', 'custom')
    ]
    
    created_tests = []
    for i, (name, test_type) in enumerate(tests_data):
        hr_user = hr_users[i % len(hr_users)]
        test = create_test_if_not_exists(name, test_type, hr_user.id)
        created_tests.append(test)
    
    if created_tests:
        db.session.commit()
        print("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã")
    else:
        print("‚úÖ –¢–µ—Å—Ç—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return Test.query.all()

def create_test_applications():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –æ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤"""
    candidates = User.query.filter_by(role='candidate').all()
    vacancies = Vacancy.query.all()
    
    if not candidates or not vacancies:
        print("‚ö†Ô∏è  –ù–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –∏–ª–∏ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫")
        return []
    
    applications_data = [
        {
            'candidate_email': 'candidate1@example.com',
            'vacancy_title': '–î–æ—Ü–µ–Ω—Ç –∫–∞—Ñ–µ–¥—Ä—ã IT-–∏–Ω–∂–µ–Ω–µ—Ä–∏–∏',
            'birth_date': datetime(1990, 5, 15).date(),
            'citizenship': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω',
            'city': '–ê–ª–º–∞—Ç—ã',
            'phone': '+7 777 123 4567',
            'marital_status': '–ñ–µ–Ω–∞—Ç/–ó–∞–º—É–∂–µ–º',
            'military_status': '–°–ª—É–∂–∏–ª, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω',
            'no_criminal_record': True,
            'has_disability': False,
            'is_pensioner': False,
            'work_experience': '–¢–û–û "Kaspi Bank", –í–µ–¥—É—â–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (2014-2020)\n–¢–û–û "Halyk Bank", –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ü–û (2020-2023)\n–ö–∞–∑–ù–£ –∏–º. –∞–ª—å-–§–∞—Ä–∞–±–∏, –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å (—Å–æ–≤–º–µ—Å—Ç–∏—Ç–µ–ª—å—Å—Ç–≤–æ, 2021-–Ω.–≤.)',
            'academic_degree': 'PhD',
            'academic_title': '–ê—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä',
            'title_date': datetime(2021, 6, 15).date(),
            'publications_count': 15,
            'key_publications': '1. "–ú–µ—Ç–æ–¥—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –≤ —Ñ–∏–Ω—Ç–µ—Ö" - –í–µ—Å—Ç–Ω–∏–∫ –ö–∞–∑–ù–£, 2022\n2. "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö" - International Journal of Computer Science, 2021\n3. "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–ª–æ–∫—á–µ–π–Ω–∞ –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏" - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ AITU, 2023',
            'projects_count': 8,
            'projects_list': '1. –°–∏—Å—Ç–µ–º–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ö–∞–∑–ù–£ (—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å)\n2. –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±–∞–Ω–∫–∞ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ª–∏–¥–µ—Ä)\n3. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ò–ò –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ (–≥—Ä–∞–Ω—Ç –ú–û–ù –†–ö)',
            'h_index': 5,
            'patents': '2 –ø–∞—Ç–µ–Ω—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ –ò–¢',
            'courses': '–ö—É—Ä—Å—ã AWS (2020), Machine Learning Coursera (2021), –ü–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ö–∞–∑–ù–£, 2022)',
            'languages': '–ö–∞–∑–∞—Ö—Å–∫–∏–π (—Ä–æ–¥–Ω–æ–π), –†—É—Å—Å–∫–∏–π (—Å–≤–æ–±–æ–¥–Ω–æ), –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π), –ö–∏—Ç–∞–π—Å–∫–∏–π (–±–∞–∑–æ–≤—ã–π)',
            'awards': '–õ—É—á—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≥–æ–¥–∞ –ö–∞–∑–ù–£ (2022), –ì—Ä–∞–Ω—Ç "–õ—É—á—à–∏–π –º–æ–ª–æ–¥–æ–π —É—á–µ–Ω—ã–π" (2021)',
            'video_presentation': 'https://youtube.com/watch?v=example1',
            'data_processing_consent': True,
            'video_audio_consent': True
        },
        {
            'candidate_email': 'candidate2@example.com',
            'vacancy_title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏',
            'birth_date': datetime(1985, 12, 8).date(),
            'citizenship': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω',
            'city': '–ê–ª–º–∞—Ç—ã',
            'phone': '+7 777 234 5678',
            'marital_status': '–•–æ–ª–æ—Å—Ç/–ù–µ –∑–∞–º—É–∂–µ–º',
            'military_status': '–ù–µ –ø–æ–¥–ª–µ–∂–∏—Ç –ø—Ä–∏–∑—ã–≤—É',
            'no_criminal_record': True,
            'has_disability': False,
            'is_pensioner': False,
            'work_experience': '–¢–û–û "–¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ò–ë (2010-2015)\n–¢–û–û "SecureNet", –í–µ–¥—É—â–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (2015-2020)\n–§—Ä–∏–ª–∞–Ω—Å –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ –ò–ë (2020-–Ω.–≤.)',
            'academic_degree': '–ö–∞–Ω–¥–∏–¥–∞—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫',
            'academic_title': '–î–æ—Ü–µ–Ω—Ç',
            'title_date': datetime(2020, 3, 10).date(),
            'publications_count': 12,
            'key_publications': '1. "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã –æ—Ç –∫–∏–±–µ—Ä–∞—Ç–∞–∫" - –ñ—É—Ä–Ω–∞–ª –ö–ò–ë, 2021\n2. "–ê–Ω–∞–ª–∏–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, 2022\n3. "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏" - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ InfoSec, 2023',
            'projects_count': 6,
            'projects_list': '1. –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ç–µ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –±–∞–Ω–∫–∞\n2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –ò–ë –¥–ª—è –≥–æ—Å—É—á—Ä–µ–∂–¥–µ–Ω–∏–π\n3. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ IoT –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–≥—Ä–∞–Ω—Ç –ö–ù –ú–û–ù –†–ö)',
            'h_index': 3,
            'patents': '1 –ø–∞—Ç–µ–Ω—Ç –Ω–∞ —Å–∏—Å—Ç–µ–º—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≤—Ç–æ—Ä–∂–µ–Ω–∏–π',
            'courses': 'CISSP (2018), CEH (2019), –ö—É—Ä—Å—ã –ø–æ —ç—Ç–∏—á–Ω–æ–º—É —Ö–∞–∫–∏–Ω–≥—É (2020)',
            'languages': '–ö–∞–∑–∞—Ö—Å–∫–∏–π (—Ä–æ–¥–Ω–æ–π), –†—É—Å—Å–∫–∏–π (—Å–≤–æ–±–æ–¥–Ω–æ), –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)',
            'awards': '–õ—É—á—à–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ò–ë –≥–æ–¥–∞ (2019), –ì—Ä–∞–Ω—Ç –º–æ–ª–æ–¥–æ–≥–æ —É—á–µ–Ω–æ–≥–æ (2020)',
            'video_presentation': 'https://youtube.com/watch?v=example2',
            'data_processing_consent': True,
            'video_audio_consent': True
        },
        {
            'candidate_email': 'candidate3@example.com',
            'vacancy_title': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏',
            'birth_date': datetime(1988, 7, 22).date(),
            'citizenship': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω',
            'city': '–ù—É—Ä-–°—É–ª—Ç–∞–Ω',
            'phone': '+7 777 345 6789',
            'marital_status': '–ñ–µ–Ω–∞—Ç/–ó–∞–º—É–∂–µ–º',
            'military_status': '–°–ª—É–∂–∏–ª',
            'no_criminal_record': True,
            'has_disability': False,
            'is_pensioner': False,
            'work_experience': '–ö–∞–∑–ù–£ –∏–º. –∞–ª—å-–§–∞—Ä–∞–±–∏, –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ (2012-2018)\n–ù–∞–∑–∞—Ä–±–∞–µ–≤ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –°—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å (2018-2023)\n–û–Ω–ª–∞–π–Ω —à–∫–æ–ª–∞ MathPro, –ú–µ—Ç–æ–¥–∏—Å—Ç (—Å–æ–≤–º–µ—Å—Ç–∏—Ç–µ–ª—å—Å—Ç–≤–æ, 2020-–Ω.–≤.)',
            'academic_degree': '–ö–∞–Ω–¥–∏–¥–∞—Ç —Ñ–∏–∑–∏–∫–æ-–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫',
            'academic_title': '–î–æ—Ü–µ–Ω—Ç',
            'title_date': datetime(2019, 9, 5).date(),
            'publications_count': 18,
            'key_publications': '1. "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Å—à–µ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–∞—Ö" - –í–µ—Å—Ç–Ω–∏–∫ –ö–∞–∑–ù–£, 2021\n2. "–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö" - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–µ—Å—Ç–Ω–∏–∫, 2022\n3. "–ß–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö –∑–∞–¥–∞—á" - –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, 2023',
            'projects_count': 4,
            'projects_list': '1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–¥–∏–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤\n2. –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π —É—á–µ–±–Ω–∏–∫ –ø–æ –≤—ã—Å—à–µ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ\n3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π',
            'h_index': 4,
            'patents': '–ù–µ—Ç',
            'courses': '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ (2020), –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ (2021)',
            'languages': '–ö–∞–∑–∞—Ö—Å–∫–∏–π (—Ä–æ–¥–Ω–æ–π), –†—É—Å—Å–∫–∏–π (—Å–≤–æ–±–æ–¥–Ω–æ), –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (—Ö–æ—Ä–æ—à–∏–π)',
            'awards': '–õ—É—á—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ù–£ (2021), –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –ú–û–ù –†–ö (2022)',
            'video_presentation': '',
            'data_processing_consent': True,
            'video_audio_consent': True
        }
    ]
    
    created_applications = []
    for app_data in applications_data:
        candidate = User.query.filter_by(email=app_data['candidate_email']).first()
        vacancy = Vacancy.query.filter_by(title=app_data['vacancy_title']).first()
        
        if candidate and vacancy:
            if not Application.query.filter_by(candidate_id=candidate.id, vacancy_id=vacancy.id).first():
                application = Application(
                    vacancy_id=vacancy.id,
                    candidate_id=candidate.id,
                    birth_date=app_data.get('birth_date'),
                    citizenship=app_data.get('citizenship'),
                    city=app_data.get('city'),
                    phone=app_data.get('phone'),
                    marital_status=app_data.get('marital_status'),
                    military_status=app_data.get('military_status'),
                    no_criminal_record=app_data.get('no_criminal_record', False),
                    has_disability=app_data.get('has_disability', False),
                    is_pensioner=app_data.get('is_pensioner', False),
                    work_experience=app_data.get('work_experience'),
                    academic_degree=app_data.get('academic_degree'),
                    academic_title=app_data.get('academic_title'),
                    title_date=app_data.get('title_date'),
                    publications_count=app_data.get('publications_count', 0),
                    key_publications=app_data.get('key_publications'),
                    projects_count=app_data.get('projects_count', 0),
                    projects_list=app_data.get('projects_list'),
                    h_index=app_data.get('h_index'),
                    patents=app_data.get('patents'),
                    courses=app_data.get('courses'),
                    languages=app_data.get('languages'),
                    awards=app_data.get('awards'),
                    video_presentation=app_data.get('video_presentation'),
                    data_processing_consent=app_data.get('data_processing_consent', False),
                    video_audio_consent=app_data.get('video_audio_consent', False),
                    status='hr_review',  # –ó–∞—è–≤–∫–∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—é
                    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–ª—è –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏
                    revision_requested=False,
                    revision_count=0
                )
                created_applications.append(application)
    
    if created_applications:
        db.session.add_all(created_applications)
        db.session.commit()
        
        # –°–æ–∑–¥–∞–µ–º –æ–¥–Ω—É –∑–∞—è–≤–∫—É —Å –¥–æ—Ä–∞–±–æ—Ç–∫–æ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        if len(created_applications) > 0:
            revision_application = created_applications[0]
            revision_application.status = 'revision_requested'
            revision_application.revision_requested = True
            revision_application.revision_notes = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–∫–ª–∞–¥–∞ –≤ –∫–∞–∂–¥—É—é —Ä–∞–±–æ—Ç—É. –¢–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å —Å–æ–∞–≤—Ç–æ—Ä–æ–≤ –∏ –∏–º–ø–∞–∫—Ç-—Ñ–∞–∫—Ç–æ—Ä –∂—É—Ä–Ω–∞–ª–æ–≤.'
            revision_application.revision_requested_date = datetime.utcnow()
            revision_application.revision_count = 1
            revision_application.hr_decision = 'request_revision'
            revision_application.hr_decision_date = datetime.utcnow()
            db.session.commit()
            print("‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∑–∞—è–≤–∫–∞ —Å –¥–æ—Ä–∞–±–æ—Ç–∫–æ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏")
        
        print("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ —Å–æ–∑–¥–∞–Ω—ã")
    else:
        print("‚úÖ –ó–∞—è–≤–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return Application.query.all()

def create_test_results():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∑–∞—è–≤–æ–∫"""
    applications = Application.query.all()
    
    if not applications:
        print("‚ö†Ô∏è  –ù–µ—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")
        return []
    
    created_results = []
    for application in applications:
        # –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–∏
        required_tests = application.vacancy.required_tests
        
        for test in required_tests:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞
            existing_result = TestResult.query.filter_by(
                    application_id=application.id,
                test_id=test.id
            ).first()
        
            if not existing_result:
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                questions = json.loads(test.questions)
                score = random.randint(6, len(questions))  # –û—Ç 60% –¥–æ 100%
                
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                answers = [random.randint(0, 3) for _ in range(len(questions))]
                
                test_result = TestResult(
                    application_id=application.id,
                    test_id=test.id,
                    test_type=test.type,
                    answers=json.dumps(answers),
                    score=score,
                    max_score=len(questions)
                )
                created_results.append(test_result)
    
    if created_results:
        db.session.add_all(created_results)
        db.session.commit()
        print("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã")
    else:
        print("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return TestResult.query.all()

def create_test_commission_votes():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∫–æ–º–∏—Å—Å–∏–∏"""
    # –ù–∞—Ö–æ–¥–∏–º –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º hr_review –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
    applications = Application.query.filter_by(status='hr_review').all()
    
    if not applications:
        print("‚ö†Ô∏è  –ù–µ—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∫–æ–º–∏—Å—Å–∏–∏")
        return []
    
    created_votes = []
    
    # –î–ª—è –ø–µ—Ä–≤–æ–π –∑–∞—è–≤–∫–∏ —Å–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
    if applications:
        first_app = applications[0]
        first_app.status = 'interview_scheduled'
        first_app.interview_date = datetime.utcnow() + timedelta(days=7)
        first_app.interview_format = 'online'
        first_app.interview_link = 'https://zoom.us/j/123456789'
        
        for email in COMMISSION_EMAILS:
            if not CommissionVote.query.filter_by(application_id=first_app.id, voter_email=email).first():
                vote = CommissionVote(
                    application_id=first_app.id,
                    voter_email=email
                )
                created_votes.append(vote)
    
    if created_votes:
        db.session.add_all(created_votes)
        db.session.commit()
        print("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏ —Å–æ–∑–¥–∞–Ω—ã")
    else:
        print("‚úÖ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç")
    
    return CommissionVote.query.all()

def init_project():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–ª–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"""
    print("üéì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è HR –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞ –ü–ü–°")
    print("=" * 50)
    
    with app.app_context():
        # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã
        db.create_all()
        print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞")
        
        # –°–æ–∑–¥–∞–µ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã–µ
        admin = create_default_admin()
        departments = create_test_departments()
        hr_users = create_test_hr_users()
        dept_heads = create_test_department_heads()
        candidates = create_test_candidates()
        tests = create_test_tests()
        vacancies = create_test_vacancies()
        applications = create_test_applications()
        results = create_test_results()
        votes = create_test_commission_votes()
        
        print("\n" + "=" * 50)
        print("üéâ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!")
        print("\nüìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:")
        print("üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: admin@university.com / admin123")
        print("üë§ HR —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã:")
        for hr in hr_users:
            print(f"   üìß {hr.email} / aues2024")
        print("üë§ –ì–ª–∞–≤—ã –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤:")
        for head in dept_heads:
            print(f"   üìß {head.email} / aues2024")
        print("üë§ –ö–∞–Ω–¥–∏–¥–∞—Ç—ã:")
        for candidate in candidates:
            print(f"   üìß {candidate.email} / candidate123")
        
        print(f"\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
        print(f"   –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤: {len(departments)}")
        print(f"   –í–∞–∫–∞–Ω—Å–∏–π: {len(vacancies)}")
        print(f"   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {User.query.count()}")
        print(f"   –¢–µ—Å—Ç–æ–≤: {Test.query.count()}")
        print(f"   –ó–∞—è–≤–æ–∫: {Application.query.count()}")
        print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤: {TestResult.query.count()}")
        print(f"   –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∫–æ–º–∏—Å—Å–∏–∏: {CommissionVote.query.count()}")
        
        print("\nüöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: python run.py")
        print("üåê –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:5000")
        print("=" * 50)

if __name__ == '__main__':
    import sys
    
    if len(sys.argv) > 1:
        command = sys.argv[1]
        
        if command == 'simple':
            print("–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")
            create_simple_test_data()
        elif command == 'links':
            get_magic_links()
        elif command == 'full':
            init_project()
        else:
            print("–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
            print("  simple - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö")
            print("  links  - –ø–æ–∫–∞–∑–∞—Ç—å magic links –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è")
            print("  full   - –ø–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞")
    else:
        init_project()